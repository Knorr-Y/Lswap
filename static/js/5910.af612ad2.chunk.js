"use strict";(self.webpackChunk_uniswap_interface=self.webpackChunk_uniswap_interface||[]).push([[5910],{5910:function(e,t,n){n.r(t),n.d(t,{BAG_WIDTH:function(){return Tt},XXXL_BAG_WIDTH:function(){return Ct},default:function(){return _t}});var r,i=n(29439),o=n(1413),s=n(98985),a=n(73955),c=n(3884),u=n(95744),l=n(48444),d=n(27790),p=n(83138),f=n(17248),g=n(93285),x=n(2367),m=n(98921),h=n(40388),v=n(9205),I=n(25855),A=n(83143),T=n(42320),C=n(73304),N=n(30168),E=n(49200),b=n(13746);(0,E.ZP)(r||(r=(0,N.Z)(['\n  query NftUniversalRouterAddress($chain: Chain = ETHEREUM) {\n    nftRoute(chain: $chain, senderAddress: "", nftTrades: []) {\n      toAddress\n    }\n  }\n'])));var w=n(55011),_=n(57766),j=n(96528),y=n(73830),P=n(53107),k=n(24177),O=n(56926),R=n(18402),S=n(28183),L=n(68977),Z=n(30708),z=n(71233);var B=n(2534),D=n(37762),U=n(23388);function M(e){return(0,o.Z)((0,o.Z)({},{inputAmount:{amount:(n={inputAmount:e.inputAmount,outputAmount:e.outputAmount}).inputAmount.quotient.toString(),token:{address:n.inputAmount.currency.isToken?n.inputAmount.currency.address:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",chainId:n.inputAmount.currency.chainId,decimals:n.inputAmount.currency.decimals,isNative:n.inputAmount.currency.isNative}},outputAmount:{amount:n.outputAmount.quotient.toString(),token:{address:n.outputAmount.currency.isToken?n.outputAmount.currency.address:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",chainId:n.outputAmount.currency.chainId,decimals:n.outputAmount.currency.decimals,isNative:n.outputAmount.currency.isNative}}}),{},{pools:(t=e.route.pools,t.map((function(e){return function(e){var t="fee"in e;return{pair:t?void 0:{tokenAmountA:{amount:e.reserve0.quotient.toString(),token:{address:e.token0.address,chainId:e.token0.chainId,decimals:e.token0.decimals,isNative:e.token0.isNative}},tokenAmountB:{amount:e.reserve1.quotient.toString(),token:{address:e.token1.address,chainId:e.token1.chainId,decimals:e.token1.decimals,isNative:e.token1.isNative}}},pool:t?{fee:e.fee,liquidity:e.liquidity.toString(),sqrtRatioX96:e.sqrtRatioX96.toString(),tickCurrent:e.tickCurrent.toString(),tokenA:{address:e.token0.address,chainId:e.token0.chainId,decimals:e.token0.decimals,isNative:e.token0.isNative},tokenB:{address:e.token1.address,chainId:e.token1.chainId,decimals:e.token1.decimals,isNative:e.token1.isNative}}:void 0}}(e)})))});var t,n}var G=n(4252);function H(e,t,n){var r=(0,G.i)((function(e){return e.setTokenTradeInput})),i=!!e&&e.routes,o=!!e&&!!e.inputAmount&&e.inputAmount.currency.isToken,s=!!n&&!!t;(0,z.useEffect)((function(){if(i&&o&&s){var a=parseInt(n.multiply(100).toSignificant(2)),c=function(e){var t,n=[],r=[],i=[],o=e.swaps,s=(0,D.Z)(o);try{for(s.s();!(t=s.n()).done;){var a=t.value;a.route.protocol===U.Protocol.MIXED?n.push(M(a)):a.route.protocol===U.Protocol.V2?r.push(M(a)):i.push(M(a))}}catch(c){s.e(c)}finally{s.f()}return{mixedTokenTradeRouteInputs:n.length>0?n:void 0,v2TokenTradeRouteInputs:r.length>0?r:void 0,v3TokenTradeRouteInputs:i.length>0?i:void 0}}(e),u=c.mixedTokenTradeRouteInputs,l=c.v2TokenTradeRouteInputs,d=c.v3TokenTradeRouteInputs,p={mixedRoutes:u,tradeType:b.NS.ExactOutput,v2Routes:l,v3Routes:d},f="permitSignature"in t&&t.permitSignature?{details:{amount:t.permitSignature.details.amount.toString(),expiration:t.permitSignature.details.expiration.toString(),nonce:t.permitSignature.details.nonce.toString(),token:t.permitSignature.details.token},sigDeadline:t.permitSignature.sigDeadline.toString(),signature:t.permitSignature.signature,spender:t.permitSignature.spender}:void 0;r({permit:f,routes:p,slippageToleranceBasisPoints:a,tokenAmount:{amount:e.inputAmount.quotient.toString(),token:{address:e.inputAmount.currency.address,chainId:e.inputAmount.currency.chainId,decimals:e.inputAmount.currency.decimals,isNative:e.inputAmount.currency.isNative}}})}else r(void 0)}),[t,n,s,o,i,r,e])}var F=n(74165),W=n(15861),V=n(7914);function q(e,t,n){var r=(0,f.useWeb3React)().chainId,o=function(e,t){if(e)return e===S.SupportedChainId.MAINNET?null!==t&&void 0!==t?t:"0xb5088D94A080BddAee4a8a424aD8c4d8515EB09f":(0,C.EC)(e)?"0xb5088D94A080BddAee4a8a424aD8c4d8515EB09f":void 0}(r,n),s=null!==t&&void 0!==t?t:null!==e&&void 0!==e&&e.currency.isToken?e:void 0,a=(0,_.Z)(s,o),l=a.state===_.K.REQUIRED&&a.isApprovalLoading,d=(0,z.useState)(!1),p=(0,i.Z)(d,2),g=p[0],x=p[1],m=(0,z.useCallback)((0,W.Z)((0,F.Z)().mark((function e(){return(0,F.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,V.Z)(a.state===_.K.REQUIRED),x(!0),e.prev=2,e.next=5,a.approveAndPermit();case 5:(0,c._P)(u.Je.APPROVE_TOKEN_TXN_SUBMITTED,{chain_id:r,token_symbol:null===t||void 0===t?void 0:t.currency.symbol,token_address:null===t||void 0===t?void 0:t.currency.address}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:return e.prev=11,x(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[2,8,11,14]])}))),[a,r,null===t||void 0===t?void 0:t.currency.address,null===t||void 0===t?void 0:t.currency.symbol]);return(0,z.useMemo)((function(){return{allowance:a,isApprovalLoading:l,isAllowancePending:g,updateAllowance:m}}),[a,g,l,m])}var X=n(62291);function K(e){var t=(0,s.useTheme)();return(0,z.useMemo)((function(){var n=e?(0,X.QW)(e):void 0,r=n?(0,X.BK)(n):void 0,i="error"===r?t.accentCritical:"warning"===r?t.accentWarning:void 0;return n&&r&&i?{priceImpactSeverity:{type:r,color:i},displayPercentage:function(){return function(e){var t,n=e.lessThan(0)?"+":"";if(Number(e.numerator)/Number(e.denominator)*100<.005)return"0.00%";var r=parseFloat(null===(t=e.multiply(-1))||void 0===t?void 0:t.toFixed(2));return"".concat(n).concat(r,"%")}(n)}}:void 0}),[t.accentCritical,t.accentWarning,e])}var $=n(72249),Y=n(81737),J=n(68577);var Q=n(79146),ee=n(92311),te=n(78264),ne=n(27623),re=n(16337),ie=n(25618),oe=n(4942),se=n(37881),ae=function(e){return e[e.WALLET_NOT_CONNECTED=0]="WALLET_NOT_CONNECTED",e[e.NOT_SUPPORTED_CHAIN=1]="NOT_SUPPORTED_CHAIN",e[e.INSUFFICIENT_BALANCE=2]="INSUFFICIENT_BALANCE",e[e.ERROR=3]="ERROR",e[e.IN_WALLET_CONFIRMATION=4]="IN_WALLET_CONFIRMATION",e[e.PROCESSING_TRANSACTION=5]="PROCESSING_TRANSACTION",e[e.FETCHING_TOKEN_ROUTE=6]="FETCHING_TOKEN_ROUTE",e[e.INVALID_TOKEN_ROUTE=7]="INVALID_TOKEN_ROUTE",e[e.NO_TOKEN_ROUTE_FOUND=8]="NO_TOKEN_ROUTE_FOUND",e[e.LOADING_ALLOWANCE=9]="LOADING_ALLOWANCE",e[e.IN_WALLET_ALLOWANCE_APPROVAL=10]="IN_WALLET_ALLOWANCE_APPROVAL",e[e.PROCESSING_APPROVAL=11]="PROCESSING_APPROVAL",e[e.REQUIRE_APPROVAL=12]="REQUIRE_APPROVAL",e[e.CONFIRM_UPDATED_PRICE=13]="CONFIRM_UPDATED_PRICE",e[e.PRICE_IMPACT_HIGH=14]="PRICE_IMPACT_HIGH",e[e.PAY=15]="PAY",e}({});function ce(e,t,n,r,i){var s,c={handleClick:function(){},buttonText:(0,se.jsx)(a.cC,{id:"Something went wrong"}),disabled:!0,warningText:void 0,warningTextColor:t.accentWarning,helperText:void 0,helperTextColor:t.textSecondary,buttonColor:t.accentAction,buttonTextColor:t.accentTextLightPrimary};return(s={},(0,oe.Z)(s,ae.WALLET_NOT_CONNECTED,(0,o.Z)((0,o.Z)({},c),{},{handleClick:null!==n&&void 0!==n?n:function(){},disabled:!1,buttonText:(0,se.jsx)(a.cC,{id:"Connect wallet"})})),(0,oe.Z)(s,ae.NOT_SUPPORTED_CHAIN,(0,o.Z)((0,o.Z)({},c),{},{handleClick:null!==n&&void 0!==n?n:function(){},buttonText:(0,se.jsx)(a.cC,{id:"Switch networks"}),disabled:!1,warningText:(0,se.jsx)(a.cC,{id:"Wrong network"})})),(0,oe.Z)(s,ae.INSUFFICIENT_BALANCE,(0,o.Z)((0,o.Z)({},c),{},{buttonText:(0,se.jsx)(a.cC,{id:"Pay"}),warningText:(0,se.jsx)(a.cC,{id:"Insufficient funds"})})),(0,oe.Z)(s,ae.ERROR,(0,o.Z)((0,o.Z)({},c),{},{warningText:(0,se.jsx)(a.cC,{id:"Something went wrong. Please try again."})})),(0,oe.Z)(s,ae.IN_WALLET_CONFIRMATION,(0,o.Z)((0,o.Z)({},c),{},{buttonText:(0,se.jsx)(a.cC,{id:"Proceed in wallet"})})),(0,oe.Z)(s,ae.PROCESSING_TRANSACTION,(0,o.Z)((0,o.Z)({},c),{},{buttonText:(0,se.jsx)(a.cC,{id:"Transaction pending"})})),(0,oe.Z)(s,ae.FETCHING_TOKEN_ROUTE,(0,o.Z)((0,o.Z)({},c),{},{buttonText:(0,se.jsx)(a.cC,{id:"Fetching Route"})})),(0,oe.Z)(s,ae.INVALID_TOKEN_ROUTE,(0,o.Z)((0,o.Z)({},c),{},{buttonText:(0,se.jsx)(a.cC,{id:"Pay"})})),(0,oe.Z)(s,ae.NO_TOKEN_ROUTE_FOUND,(0,o.Z)((0,o.Z)({},c),{},{buttonText:(0,se.jsx)(a.cC,{id:"Insufficient liquidity"}),buttonColor:t.backgroundInteractive,buttonTextColor:t.textPrimary,helperText:(0,se.jsx)(a.cC,{id:"Insufficient pool liquidity to complete transaction"})})),(0,oe.Z)(s,ae.LOADING_ALLOWANCE,(0,o.Z)((0,o.Z)({},c),{},{buttonText:(0,se.jsx)(a.cC,{id:"Loading Allowance"})})),(0,oe.Z)(s,ae.IN_WALLET_ALLOWANCE_APPROVAL,(0,o.Z)((0,o.Z)({},c),{},{buttonText:(0,se.jsx)(a.cC,{id:"Approve in your wallet"})})),(0,oe.Z)(s,ae.PROCESSING_APPROVAL,(0,o.Z)((0,o.Z)({},c),{},{buttonText:(0,se.jsx)(a.cC,{id:"Approval pending"})})),(0,oe.Z)(s,ae.REQUIRE_APPROVAL,(0,o.Z)((0,o.Z)({},c),{},{disabled:!1,handleClick:null!==n&&void 0!==n?n:function(){},helperText:(0,se.jsx)(a.cC,{id:"An approval is needed to use this token."}),buttonText:(0,se.jsx)(a.cC,{id:"Approve"})})),(0,oe.Z)(s,ae.CONFIRM_UPDATED_PRICE,(0,o.Z)((0,o.Z)({},c),{},{handleClick:null!==n&&void 0!==n?n:function(){},disabled:!1,warningTextColor:t.accentAction,warningText:(0,se.jsx)(a.cC,{id:"Price updated"}),buttonText:(0,se.jsx)(a.cC,{id:"Pay"})})),(0,oe.Z)(s,ae.PRICE_IMPACT_HIGH,(0,o.Z)((0,o.Z)({},c),{},{handleClick:null!==n&&void 0!==n?n:function(){},disabled:!1,buttonColor:i?i.priceImpactSeverity.color:c.buttonColor,helperText:(0,se.jsx)(a.cC,{id:"Price impact warning"}),helperTextColor:i?i.priceImpactSeverity.color:c.helperTextColor,buttonText:(0,se.jsx)(a.cC,{id:"Pay Anyway"})})),(0,oe.Z)(s,ae.PAY,(0,o.Z)((0,o.Z)({},c),{},{handleClick:null!==n&&void 0!==n?n:function(){},disabled:!1,buttonText:(0,se.jsx)(a.cC,{id:"Pay"}),helperText:r?(0,se.jsx)(a.cC,{id:"Refunds for unavailable items will be given in ETH"}):void 0})),s)[e]}var ue,le=s.default.div.withConfig({componentId:"sc-rcepl8-0"})(["padding:0px 12px;"]),de=s.default.div.withConfig({componentId:"sc-rcepl8-1"})(["border-top:1px solid ",";color:",";display:flex;flex-direction:column;margin:0px 16px 8px;padding:12px 0px;border-bottom-left-radius:12px;border-bottom-right-radius:12px;"],(function(e){return e.theme.backgroundOutline}),(function(e){return e.theme.textPrimary})),pe=(0,s.default)(x.ZP).withConfig({componentId:"sc-rcepl8-2"})(["padding-top:8px;padding-bottom:16px;"]),fe=(0,s.default)(v.ZP).withConfig({componentId:"sc-rcepl8-3"})(["justify-content:space-between;align-items:start;gap:8px;"]),ge=(0,s.default)(x.ZP).withConfig({componentId:"sc-rcepl8-4"})(["text-align:end;overflow-x:hidden;"]),xe=(0,s.default)(te.Z).withConfig({componentId:"sc-rcepl8-5"})(["width:14px;margin-right:4px;color:inherit;"]),me=(0,s.default)(ie.Tv.BodyPrimary).withConfig({componentId:"sc-rcepl8-6"})(["align-items:center;color:",";display:flex;justify-content:center;margin-bottom:10px !important;text-align:center;"],(function(e){return e.$color})),he=(0,s.default)(ie.Tv.Caption).withConfig({componentId:"sc-rcepl8-7"})(["color:",";display:flex;justify-content:center;text-align:center;margin-bottom:10px !important;"],(function(e){return e.$color})),ve=(0,s.default)(v.ZP).withConfig({componentId:"sc-rcepl8-8"})(["gap:8px;cursor:pointer;"]),Ie=s.default.button.withConfig({componentId:"sc-rcepl8-9"})(["display:flex;background:",";color:",";font-weight:600;line-height:24px;font-size:16px;gap:16px;justify-content:center;border:none;border-radius:12px;padding:12px 0px;cursor:pointer;align-items:center;&:disabled{opacity:0.6;cursor:auto;}"],(function(e){return e.$backgroundColor}),(function(e){return e.$color})),Ae=(0,s.default)(A.X).withConfig({componentId:"sc-rcepl8-10"})(["border-radius:4px;width:4rem;height:20px;align-self:end;"]),Te=(0,s.default)(v.ZP).withConfig({componentId:"sc-rcepl8-11"})(["align-items:center;gap:8px;width:100%;justify-content:flex-end;"]),Ce=(0,s.default)(v.ZP).withConfig({componentId:"sc-rcepl8-12"})(["align-items:center;gap:8px;"]),Ne=(0,s.default)(ie.Tv.BodyPrimary).withConfig({componentId:"sc-rcepl8-13"})(["line-height:20px;font-weight:500;overflow-x:hidden;text-overflow:ellipsis;white-space:nowrap;scrollbar-width:none;::-webkit-scrollbar{display:none;}"]),Ee=function(e){var t=e.color,n=e.children;return n?(0,se.jsxs)(me,{"data-testid":"nft-buy-button-warning",fontSize:"14px",lineHeight:"20px",$color:t,children:[(0,se.jsx)(xe,{}),n]}):null},be=function(e){var t=e.children,n=e.color;return t?(0,se.jsx)(he,{lineHeight:"16px",$color:n,children:t}):null},we=function(e){var t,n=e.usingPayWithAnyToken,r=e.totalEthPrice,i=e.activeCurrency,o=e.tradeState,s=e.trade;return n?o!==re.qx.LOADING||s?(0,se.jsx)(Ne,{color:o===re.qx.LOADING?"textTertiary":"textPrimary",children:(0,ee.Nd)(null===s||void 0===s?void 0:s.inputAmount.toExact())}):(0,se.jsx)(ie.Tv.BodyPrimary,{color:"textTertiary",lineHeight:"20px",fontWeight:"500",children:(0,se.jsx)(a.cC,{id:"Fetching price..."})}):(0,se.jsxs)(ie.Tv.BodyPrimary,{lineHeight:"20px",fontWeight:"500",children:[(0,ee.zb)(r.toString()),"\xa0",null!==(t=null===i||void 0===i?void 0:i.symbol)&&void 0!==t?t:"ETH"]})},_e=function(e){var t=e.usdcValue,n=e.priceImpact,r=e.tradeState,i=e.usingPayWithAnyToken;return t?(0,se.jsxs)(Te,{children:[n&&(0,se.jsx)(se.Fragment,{children:(0,se.jsx)(T.ud,{text:d.ag._("The estimated difference between the USD values of input and output amounts."),children:(0,se.jsxs)(Ce,{children:[(0,se.jsx)(te.Z,{color:n.priceImpactSeverity.color,size:"16px"}),(0,se.jsxs)(ie.Tv.BodySmall,{style:{color:n.priceImpactSeverity.color},lineHeight:"20px",children:["(",(0,se.jsx)(a.cC,{id:"{0}",values:{0:n.displayPercentage()}}),")"]})]})})}),(0,se.jsx)(ie.Tv.BodySmall,{color:"textTertiary",lineHeight:"20px",children:"".concat((0,ee.Nd)(null===t||void 0===t?void 0:t.toExact(),!0))})]}):!i||r!==re.qx.INVALID&&r!==re.qx.NO_ROUTE_FOUND?(0,se.jsx)(Ae,{}):null},je=[$.s.FETCHING_ROUTE,$.s.CONFIRMING_IN_WALLET,$.s.FETCHING_FINAL_ROUTE,$.s.PROCESSING_TRANSACTION],ye=function(e){var t=e.setModalIsOpen,n=e.eventProperties,r=(0,g.LK)(),l=(0,s.useTheme)(),d=(0,f.useWeb3React)(),v=d.account,A=d.chainId,T=d.connector,N=Boolean(v&&A),E=(0,R.P)(),D=(0,G.i)((function(e){return{inputCurrency:e.inputCurrency}}),Y.X).inputCurrency,U=(0,G.i)((function(e){return e.setInputCurrency})),M=(0,w.U8)("ETH"),F=(0,P.mM)(null!==v&&void 0!==v?v:void 0,D&&D.isToken?D:void 0),W=(0,O.c)((function(e){return{isLocked:e.isLocked,bagStatus:e.bagStatus,setBagExpanded:e.setBagExpanded,setBagStatus:e.setBagStatus}}),Y.X),V=W.isLocked,X=W.bagStatus,ee=W.setBagExpanded,te=W.setBagStatus,oe=(0,z.useState)(!1),ue=(0,i.Z)(oe,2),xe=ue[0],me=ue[1],he=je.includes(X),Ae=null!==D&&void 0!==D?D:M,Te=!!D&&A===C.HL.MAINNET,Ce=function(){var e,t=(0,b.Z6)({fetchPolicy:"no-cache"}),n=t.data,r=t.loading;return{universalRouterAddress:null===n||void 0===n||null===(e=n.nftRoute)||void 0===e?void 0:e.toAddress,universalRouterAddressIsLoading:r}}(),Ne=Ce.universalRouterAddress,ye=Ce.universalRouterAddressIsLoading;!function(e){var t=(0,J.p)((function(e){return e.state})),n=(0,J.p)((function(e){return e.setState})),r=(0,z.useRef)(t),i=(0,O.c)((function(e){return{setBagExpanded:e.setBagExpanded,setBagStatus:e.setBagStatus,setLocked:e.setLocked}}),Y.X),o=i.setBagStatus,s=i.setLocked;(0,z.useEffect)((function(){J.p.subscribe((function(e){return r.current=e.state}))}),[]),(0,z.useEffect)((function(){r.current===$.c$.Confirming&&o($.s.PROCESSING_TRANSACTION),r.current!==$.c$.Denied&&r.current!==$.c$.Invalid||(r.current===$.c$.Invalid?o($.s.WARNING):o($.s.CONFIRM_REVIEW),n($.c$.New),s(!1),e(!1))}),[s,o,e,n,r.current])}(t);var Pe=(0,B.$)(),ke=(0,z.useMemo)((function(){return(0,k.Z)((0,p.formatEther)(E.toString()),null!==M&&void 0!==M?M:void 0)}),[M,E]),Oe=function(e,t){var n=(0,Z.P)(S.TradeType.EXACT_OUTPUT,t,null!==e&&void 0!==e?e:void 0),r=n.state,i=n.trade,o=(0,L.Z)(i),s=(0,z.useMemo)((function(){var e=null===i||void 0===i?void 0:i.maximumAmountIn(o);return null!==e&&void 0!==e&&e.currency.isToken?e:void 0}),[o,i]);return(0,z.useMemo)((function(){return{state:r,trade:i,maximumAmountIn:s,allowedSlippage:o}}),[o,s,r,i])}(Te?D:void 0,ke),Re=Oe.state,Se=Oe.trade,Le=Oe.maximumAmountIn,Ze=Oe.allowedSlippage,ze=q(null!==Se&&void 0!==Se&&Se.inputAmount.currency.isToken?null===Se||void 0===Se?void 0:Se.inputAmount:void 0,Le,Ne),Be=ze.allowance,De=ze.isAllowancePending,Ue=ze.isApprovalLoading,Me=ze.updateAllowance,Ge=Be.state===_.K.LOADING||ye;H(Se,Be,Ze);var He=K(Se),Fe=(0,j.sq)(null===Se||void 0===Se?void 0:Se.inputAmount),We=(0,j.sq)(ke),Ve=Te?Fe:We,qe=(0,Q.t)().balance,Xe=(0,z.useMemo)((function(){if(N&&A===C.HL.MAINNET){if(D){var e=null===Se||void 0===Se?void 0:Se.inputAmount;if(!F||!e)return;return!F.lessThan(e)}return(0,p.parseEther)(qe).gte(E)}}),[N,A,D,qe,E,null===Se||void 0===Se?void 0:Se.inputAmount,F]);(0,z.useEffect)((function(){te($.s.ADDING_TO_BAG)}),[D,te]);var Ke=(0,y.o)(),$e=(0,z.useMemo)((function(){if(N&&A!==C.HL.MAINNET){return ce(ae.NOT_SUPPORTED_CHAIN,l,(function(){return Ke(T,C.HL.MAINNET)}))}if(!1===Xe)return ce(ae.INSUFFICIENT_BALANCE,l);if(X===$.s.WARNING)return ce(ae.ERROR,l);if(!N){return ce(ae.WALLET_NOT_CONNECTED,l,(function(){r(),ee({bagExpanded:!1})}))}if(X===$.s.FETCHING_FINAL_ROUTE||X===$.s.CONFIRMING_IN_WALLET)return ce(ae.IN_WALLET_CONFIRMATION,l);if(X===$.s.PROCESSING_TRANSACTION)return ce(ae.PROCESSING_TRANSACTION,l);if(Te&&Re!==re.qx.VALID)return Re===re.qx.INVALID?ce(ae.INVALID_TOKEN_ROUTE,l):Re===re.qx.NO_ROUTE_FOUND?ce(ae.NO_TOKEN_ROUTE_FOUND,l):ce(ae.FETCHING_TOKEN_ROUTE,l);if(Be.state===_.K.REQUIRED||Ge){var e=function(){return Me()};return ce(Ge?ae.LOADING_ALLOWANCE:De?ae.IN_WALLET_ALLOWANCE_APPROVAL:Ue?ae.PROCESSING_APPROVAL:ae.REQUIRE_APPROVAL,l,e)}return X===$.s.CONFIRM_QUOTE?ce(ae.CONFIRM_UPDATED_PRICE,l,Pe):He&&"error"===He.priceImpactSeverity.type?ce(ae.PRICE_IMPACT_HIGH,l,Pe,Te,He):ce(ae.PAY,l,Pe,Te)}),[N,A,Xe,X,Te,Re,Be.state,Ge,He,l,Pe,Ke,T,r,ee,De,Ue,Me]),Ye=$e.buttonText,Je=$e.buttonTextColor,Qe=$e.disabled,et=$e.warningText,tt=$e.warningTextColor,nt=$e.helperText,rt=$e.helperTextColor,it=$e.handleClick,ot=$e.buttonColor,st=(0,o.Z)({usd_value:null===Ve||void 0===Ve?void 0:Ve.toExact(),using_erc20:!!D},n);return(0,se.jsxs)(le,{children:[(0,se.jsxs)(de,{children:[(0,se.jsxs)(pe,{gap:"xs",children:[(0,se.jsxs)(fe,{children:[(0,se.jsx)(x.ZP,{gap:"xs",children:(0,C.EC)(A)&&(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(ie.Tv.SubHeaderSmall,{children:(0,se.jsx)(a.cC,{id:"Pay with"})}),(0,se.jsxs)(ve,{onClick:function(){V||(me(!0),(0,c._P)(u.Yz.NFT_BUY_TOKEN_SELECTOR_CLICKED))},children:[(0,se.jsx)(h.Z,{currency:Ae,size:"24px"}),(0,se.jsx)(ie.Tv.HeadlineSmall,{fontWeight:500,lineHeight:"24px",children:null===Ae||void 0===Ae?void 0:Ae.symbol}),(0,se.jsx)(ne.Z,{size:20,color:l.textSecondary})]})]})}),(0,se.jsxs)(ge,{gap:"xs",children:[(0,se.jsx)(ie.Tv.SubHeaderSmall,{marginBottom:"4px",children:(0,se.jsx)(a.cC,{id:"Total"})}),(0,se.jsx)(we,{usingPayWithAnyToken:Te,totalEthPrice:E,activeCurrency:Ae,tradeState:Re,trade:Se})]})]}),(0,se.jsx)(_e,{usdcValue:Ve,priceImpact:He,tradeState:Re,usingPayWithAnyToken:Te})]}),(0,se.jsxs)(c.M8,{events:[u.TM.onClick],name:u.Yz.NFT_BUY_BAG_PAY,element:u.xo.NFT_BUY_BAG_PAY_BUTTON,properties:(0,o.Z)({},st),shouldLogImpression:N&&!Qe,children:[(0,se.jsx)(Ee,{color:tt,children:et}),(0,se.jsx)(be,{color:rt,children:nt}),(0,se.jsxs)(Ie,{"data-testid":"nft-buy-button",onClick:it,disabled:Qe||he,$backgroundColor:ot,$color:Je,children:[he&&(0,se.jsx)(m.ZP,{size:"20px",stroke:"white"}),Ye]})]})]}),(0,se.jsx)(I.Z,{isOpen:xe,onDismiss:function(){return me(!1)},onCurrencySelect:function(e){U(e.isNative?void 0:e),e.isToken&&(0,c._P)(u.Yz.NFT_BUY_TOKEN_SELECTED,{token_address:e.address,token_symbol:e.symbol})},selectedCurrency:null!==Ae&&void 0!==Ae?Ae:void 0,onlyShowCurrenciesWithBalance:!0})]})},Pe=n(27811),ke=n(73276),Oe=n(38757),Re=n(4896),Se=n(67917),Le=n(24691),Ze=(n(21844),n(96812)),ze=n(6833),Be=n(16074),De=(0,s.keyframes)(ue||(ue=(0,N.Z)(["\n  0% {\n    stroke-dashoffset: 1000;\n  }\n  100% {\n    stroke-dashoffset: 0;\n  }\n"]))),Ue=s.default.circle.withConfig({componentId:"sc-5ix82i-0"})(["stroke-dasharray:1000;stroke-dashoffset:0;-webkit-animation:"," linear;animation:"," linear;animation-duration:160s;stroke:",";"],De,De,(function(e){return e.theme.accentAction})),Me=function(){return(0,se.jsx)(Pe.n,{display:"flex",position:"absolute",children:(0,se.jsx)("svg",{height:"18px",width:"18px",children:(0,se.jsx)(Ue,{strokeWidth:"".concat(1.5),strokeLinecap:"round",style:{transform:"rotate(90deg)",transformOrigin:"50% 50%"},fill:"transparent",r:"8px",cx:"9px",cy:"9px"})})})},Ge=n(75405),He=n(58600),Fe=n(89191),We=n(38175),Ve=n(6261),qe=(n(30473),"_1kuawcb rgw6ezb1 rgw6ezcv rgw6ez7m3 rgw6ez45v rgw6ez45p"),Xe="_1kuawc1 rgw6ez2dv rgw6ez2jd rgw6ez2oj rgw6ez281 rgw6ez4ej rgw6ez3tj rgw6ez79z rgw6ez1dv rgw6ez7bj",Ke="rgw6ez14d rgw6ez1bd rgw6ez49p rgw6ez7bb",$e="rgw6ezcp rgw6ezav rgw6eze7 rgw6ez7m3 rgw6ez45p rgw6ez45v rgw6ez4ep",Ye="_1kuawc7",Je="rgw6ez3xv",Qe=(0,s.default)(Be.UH).withConfig({componentId:"sc-iebvtt-0"})(["border-radius:12px;font-size:14px;line-height:16px;margin-left:16px;padding:12px 14px;"]),et=(0,s.default)(Be.UH).withConfig({componentId:"sc-iebvtt-1"})(["border-radius:12px;flex:1 1 auto;font-size:14px;padding:8px;width:50%;"]),tt=s.default.div.withConfig({componentId:"sc-iebvtt-2"})(["position:absolute;display:block;right:-11px;top:-11px;z-index:1;transition:250ms;width:45px;height:45px;display:flex;align-items:center;justify-content:center;"]),nt=function(e){var t=e.onClick;return(0,se.jsx)(tt,{onClick:t,children:(0,se.jsx)(He.Xv,{})})},rt=function(){return(0,se.jsx)(Pe.n,{position:"relative",background:"loadingBackground",className:Ke,children:(0,se.jsxs)(Pe.n,{position:"absolute",textAlign:"center",left:"1/2",top:"1/2",style:{transform:"translate3d(-50%, -50%, 0)"},color:"gray500",fontSize:"12",fontWeight:"normal",children:["Image",(0,se.jsx)("br",{}),"not",(0,se.jsx)("br",{}),"available"]})})},it=function(e){var t,n=e.asset,r=e.usdPrice,o=e.removeAsset,s=e.showRemove,a=e.grayscale,c=e.isMobile,u=(0,z.useState)(!1),l=(0,i.Z)(u,2),d=l[0],f=l[1],g=(0,z.useState)(!n.smallImageUrl),x=(0,i.Z)(g,2),m=x[0],h=x[1],v=(0,z.useState)(!1),I=(0,i.Z)(v,2),A=I[0],T=I[1],C=(0,z.useCallback)((function(){return T(!0)}),[]),N=(0,z.useCallback)((function(){return T(!1)}),[]),E=Boolean(s&&A&&!c),b=n.updatedPriceInfo?n.updatedPriceInfo.ETHPrice:n.priceInfo.ETHPrice,w=(0,ee.zb)(b),_=(0,ee.Nd)(r?parseFloat((0,p.formatEther)(b))*r:r,!0),j=(0,z.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),o([n])}),[n,o]);return(0,se.jsx)(Ve.rU,{to:(0,ee.PZ)(n),style:{textDecoration:"none"},children:(0,se.jsxs)(Oe.X2,{className:Xe,onMouseEnter:C,onMouseLeave:N,children:[(0,se.jsxs)(Pe.n,{position:"relative",display:"flex",children:[s&&c&&(0,se.jsx)(nt,{onClick:j}),!m&&(0,se.jsx)(Pe.n,{as:"img",src:n.smallImageUrl,alt:n.name,className:(0,ze.default)(Ke,a&&!A&&Ye),onLoad:function(){f(!0)},onError:function(){h(!0)},visibility:d?"visible":"hidden"}),!d&&(0,se.jsx)(Pe.n,{position:"absolute",className:"".concat(Ke," ").concat(We.L)}),m&&(0,se.jsx)(rt,{})]}),(0,se.jsxs)(Oe.sg,{overflow:"hidden",width:"full",color:a?"textSecondary":"textPrimary",children:[(0,se.jsxs)(Oe.X2,{overflow:"hidden",width:"full",whiteSpace:"nowrap",children:[(0,se.jsx)(Pe.n,{className:qe,children:null!==(t=n.name)&&void 0!==t?t:"#".concat(n.tokenId)}),n.susFlag&&(0,se.jsx)(Ge.yT,{})]}),(0,se.jsxs)(Oe.X2,{overflow:"hidden",whiteSpace:"nowrap",gap:"2",children:[(0,se.jsx)(Pe.n,{className:$e,children:n.collectionName}),n.collectionIsVerified&&(0,se.jsx)(He.SA,{className:Je})]})]}),E&&(0,se.jsx)(Qe,{onClick:j,emphasis:Be.eI.medium,size:Be.qE.medium,children:"Remove"}),(!E||c)&&(0,se.jsxs)(Oe.sg,{flexShrink:"0",alignItems:"flex-end",children:[(0,se.jsxs)(Pe.n,{className:"_1kuawc9 rgw6ez3sv rgw6ezb1 rgw6ezd1 rgw6ez3xv",children:[w,"\xa0ETH"]}),(0,se.jsx)(Pe.n,{className:$e,children:_})]})]})})},ot=function(e){var t,n=e.asset,r=e.usdPrice,i=e.markAssetAsReviewed,o=e.top,s=e.isMobile,a=Ze.O$.from(null===(t=n.updatedPriceInfo)||void 0===t?void 0:t.ETHPrice).gt(Ze.O$.from(n.priceInfo.ETHPrice)),c=(0,z.useCallback)((function(e){e.preventDefault(),e.stopPropagation();i(n,!1)}),[n,i]),u=(0,z.useCallback)((function(e){e.preventDefault(),e.stopPropagation();i(n,!0)}),[n,i]);return(0,se.jsxs)(Oe.sg,{className:"rgw6ez2p7 rgw6ez28p rgw6ezlj rgw6ezr1 rgw6ez4sj rgw6ez3t7 rgw6ez4ej rgw6ez7ab rgw6ez7jr rgw6ez547 rgw6ez5op rgw6ez1dv rgw6ez79z",borderTopColor:o?"backgroundOutline":"transparent",children:[(0,se.jsxs)(Oe.X2,{className:"rgw6ezcp rgw6ezav rgw6eze7 rgw6ez4cd rgw6ez3sv",children:[a?(0,se.jsx)(He.PH,{}):(0,se.jsx)(He.HE,{}),(0,se.jsx)(Pe.n,{children:"Price ".concat(a?"increased":"decreased"," from ").concat((0,ee.zb)(n.priceInfo.ETHPrice)," ETH")})]}),(0,se.jsx)(Pe.n,{style:{marginLeft:"-8px",marginRight:"-8px"},children:(0,se.jsx)(it,{asset:n,usdPrice:r,removeAsset:function(){},isMobile:s})}),(0,se.jsxs)(Oe.X2,{gap:"8",justifyContent:"space-between",children:[(0,se.jsx)(et,{onClick:c,emphasis:Be.eI.medium,size:Be.qE.small,children:"Remove"}),(0,se.jsx)(et,{onClick:u,emphasis:Be.eI.high,size:Be.qE.small,children:"Keep"})]})]})},st=function(e){var t=e.assets;return(0,se.jsx)(Oe.sg,{display:"grid",style:{gridTemplateColumns:"repeat(".concat(t.length,", 20px)"),width:"".concat(32+20*(t.length-1),"px")},children:t.map((function(e,t){return(0,se.jsx)(Pe.n,{as:"img",src:e.smallImageUrl,width:"32",height:"32",borderStyle:"solid",borderWidth:"1px",borderColor:"backgroundSurface",borderRadius:"4",style:{zIndex:t},className:Ye},"".concat(e.address,"-").concat(e.tokenId))}))})},at=function(e){var t=e.assets,n=e.usdPrice,r=e.clearUnavailableAssets,o=e.didOpenUnavailableAssets,s=e.setDidOpenUnavailableAssets,a=e.isMobile,c=(0,z.useReducer)((function(e){return!e}),!1),u=(0,i.Z)(c,2),l=u[0],d=u[1],p=(0,z.useState)(8),f=(0,i.Z)(p,2),g=f[0],x=f[1];if((0,z.useEffect)((function(){if(g){var e=setInterval((function(){x(g-1)}),1e3);return function(){return clearInterval(e)}}o||(r(),s(!1))}),[g,r,o,s]),!t||0===t.length)return null;var m=t.length>1,h=l||!m;return(0,se.jsx)(Oe.sg,{className:"rgw6ez2p7 rgw6ez28p rgw6ezlj rgw6ezr1 rgw6ez4sj rgw6ez3tj rgw6ez4ej rgw6ez7ab rgw6ez7jr rgw6ez547 rgw6ez60j rgw6ez5op rgw6ez1dv",children:(0,se.jsxs)(Oe.sg,{children:[(0,se.jsxs)(Oe.X2,{justifyContent:"space-between",marginBottom:h?"12":"0",cursor:m?"pointer":"default",onClick:function(){m&&(!o&&s(!0),d())},children:[(0,se.jsxs)(Oe.X2,{gap:"12",color:"textSecondary",className:Fe.Km,children:[!h&&(0,se.jsx)(st,{assets:t.slice(0,5)}),"No longer available"]}),m&&(0,se.jsx)(Oe.X2,{color:"textSecondary",children:l?(0,se.jsx)(He.X_,{}):(0,se.jsx)(He.Xs,{})}),!o&&(0,se.jsxs)(Oe.X2,{position:"relative",width:"20",height:"20",color:"textPrimary",justifyContent:"center",cursor:"pointer",onClick:r,children:[(0,se.jsx)(Me,{}),(0,se.jsx)(He.Nb,{})]})]}),(0,se.jsx)(Oe.sg,{gap:"8",style:{marginLeft:"-8px",marginRight:"-8px"},children:h&&t.map((function(e){return(0,se.jsx)(it,{asset:e,usdPrice:n,removeAsset:function(){},grayscale:!0,isMobile:a},e.id)}))})]})})},ct=n(80989),ut=function(){var e=(0,Se.cP)((function(e){return e.bagStatus})),t=(0,Se.cP)((function(e){return e.setBagStatus})),n=(0,Se.cP)((function(e){return e.markAssetAsReviewed})),r=(0,Se.cP)((function(e){return e.didOpenUnavailableAssets})),i=(0,Se.cP)((function(e){return e.setDidOpenUnavailableAssets})),s=(0,Se.cP)((function(e){return e.itemsInBag})),a=(0,Se.cP)((function(e){return e.setItemsInBag})),l=(0,Se.cP)((function(e){return e.removeAssetsFromBag})),d=(0,Se.dD)(),p=(0,z.useMemo)((function(){return(0,ee.G7)(s)}),[s]),f=(0,ct.useQuery)(["fetchPrice",{}],(function(){return(0,ee.tw)()}),{}).data,g=(0,z.useMemo)((function(){return{unchangedAssets:p.filter((function(e){return e.status===$.ZJ.ADDED_TO_BAG||e.status===$.ZJ.REVIEWED})).map((function(e){return e.asset})),priceChangedAssets:p.filter((function(e){return e.status===$.ZJ.REVIEWING_PRICE_CHANGE})).map((function(e){return e.asset})),unavailableAssets:p.filter((function(e){return e.status===$.ZJ.UNAVAILABLE})).map((function(e){return e.asset})),availableItems:p.filter((function(e){return e.status!==$.ZJ.UNAVAILABLE}))}}),[p]),x=g.unchangedAssets,m=g.priceChangedAssets,h=g.unavailableAssets,v=g.availableItems;return(0,z.useEffect)((function(){var n=m.length>0,r=p.length>0;n&&(0,c._P)(u.Yz.NFT_BUY_BAG_CHANGED,(0,o.Z)({usd_value:f,bag_quantity:p},(0,ee.Hj)(m))),e!==$.s.IN_REVIEW||n||t(r?$.s.CONFIRM_REVIEW:$.s.ADDING_TO_BAG),e!==$.s.CONFIRM_REVIEW||r||t($.s.ADDING_TO_BAG)}),[e,p,m,t,f]),(0,se.jsxs)(se.Fragment,{children:[(0,se.jsxs)(Oe.sg,{display:m.length>0||h.length>0?"flex":"none",children:[h.length>0&&(0,se.jsx)(c.fM,{name:u.Yz.NFT_BUY_BAG_CHANGED,properties:(0,o.Z)({usd_value:f,bag_quantity:p.length},(0,ee.Hj)(h)),shouldLogImpression:!0,children:(0,se.jsx)(at,{assets:h,usdPrice:f,clearUnavailableAssets:function(){return a(v)},didOpenUnavailableAssets:r,setDidOpenUnavailableAssets:i,isMobile:d})}),m.map((function(e,t){return(0,se.jsx)(ot,{asset:e,usdPrice:f,markAssetAsReviewed:n,top:0===t&&0===h.length,isMobile:d},e.id)}))]}),(0,se.jsx)(Oe.sg,{children:x.slice(0).reverse().map((function(e){return(0,se.jsx)(it,{asset:e,usdPrice:f,removeAsset:l,showRemove:!0,isMobile:d},e.id)}))})]})},lt=n(49815),dt=(0,s.default)(ie.oD).withConfig({componentId:"sc-bq6y8h-0"})(["color:",";cursor:pointer;font-weight:600;font-size:14px;line-height:16px;:active{text-decoration:none;}"],(function(e){return e.theme.textSecondary})),pt=s.default.button.withConfig({componentId:"sc-bq6y8h-1"})(["align-items:center;background-color:transparent;border-radius:8px;border:none;color:",";cursor:pointer;display:flex;flex-direction:row;justify-content:flex-end;margin-left:auto;padding:2px;opacity:1;",""],(function(e){return e.theme.textPrimary}),lt.c),ft=s.default.div.withConfig({componentId:"sc-bq6y8h-2"})(["align-items:center;background-color:",";border-radius:100px;font-weight:bold;color:",";display:flex;font-size:10px;justify-content:center;min-width:",";min-height:",";padding:4px 6px;"],(function(e){return e.theme.accentAction}),(function(e){return e.theme.accentTextLightPrimary}),(function(e){return e.sizing}),(function(e){return e.sizing})),gt=s.default.div.withConfig({componentId:"sc-bq6y8h-3"})(["align-items:center;display:flex;flex-direction:row;gap:8px;justify-content:flex-start;margin:16px 28px;text-align:center;"]),xt=function(e){var t=e.numberOfAssets,n=e.closeBag,r=e.resetFlow,i=e.isProfilePage,o=(0,z.useMemo)((function(){return function(e){var t=e.toString().length;return"".concat(14+6*t,"px")}(t)}),[t]);return(0,se.jsxs)(gt,{children:[(0,se.jsx)(ie.Tv.HeadlineSmall,{children:i?(0,se.jsx)(a.cC,{id:"Sell"}):(0,se.jsx)(a.cC,{id:"Bag"})}),t>0&&(0,se.jsxs)(se.Fragment,{children:[(0,se.jsx)(ft,{sizing:o,children:t}),(0,se.jsx)(dt,{onClick:r,children:(0,se.jsx)(a.cC,{id:"Clear all"})})]}),(0,se.jsx)(pt,{onClick:n,children:(0,se.jsx)(He.BW,{"data-testid":"nft-bag-close-icon"})})]})},mt=n(82530),ht=(0,s.default)(Oe.sg).withConfig({componentId:"sc-xhr1rt-0"})(["gap:12px;margin-top:68px;"]),vt=function(){var e=(0,l.e5)();return(0,se.jsxs)(ht,{children:[(0,se.jsx)(Oe.M5,{children:e?(0,se.jsx)(He.JP,{color:mt.Z4.colors.textTertiary}):(0,se.jsx)(He.Ln,{color:mt.Z4.colors.textTertiary,height:"96px",width:"96px",strokeWidth:"1px"})}),e?(0,se.jsx)(Oe.M5,{"data-testid":"nft-no-nfts-selected",className:Fe.v4,children:"No NFTs selected"}):(0,se.jsxs)(Oe.sg,{gap:"16",children:[(0,se.jsx)(Oe.M5,{"data-testid":"nft-empty-bag",className:Fe.v4,style:{lineHeight:"24px"},children:"Your bag is empty"}),(0,se.jsx)(Oe.M5,{fontSize:"12",fontWeight:"normal",color:"textSecondary",style:{lineHeight:"16px"},children:"Selected NFTs will appear here"})]})]})},It=function(e){var t=e.asset,n=(0,Se.Pc)((function(e){return e.removeSellAsset})),r=(0,Se.dD)(),o=(0,z.useState)(!1),s=(0,i.Z)(o,2),a=s[0],c=s[1],u=function(){return c(!a)},l=function(e){e.preventDefault(),e.stopPropagation(),n(t)};return(0,se.jsxs)(Oe.X2,{className:Xe,onMouseEnter:u,onMouseLeave:u,children:[(0,se.jsxs)(Pe.n,{position:"relative",display:"flex",children:[r&&(0,se.jsx)(nt,{onClick:l}),(0,se.jsx)("img",{src:t.smallImageUrl,alt:t.name,className:Ke})]}),(0,se.jsxs)(Oe.sg,{overflow:"hidden",width:"full",color:"textPrimary",children:[(0,se.jsx)(Oe.X2,{overflow:"hidden",width:"full",justifyContent:"space-between",whiteSpace:"nowrap",gap:"16",children:(0,se.jsx)(Pe.n,{className:qe,children:t.name||"#".concat(t.tokenId)})}),(0,se.jsxs)(Oe.X2,{overflow:"hidden",whiteSpace:"nowrap",gap:"2",children:[(0,se.jsx)(Pe.n,{className:$e,children:t.asset_contract.name}),t.collectionIsVerified&&(0,se.jsx)(He.SA,{className:Je})]})]}),a&&!r&&(0,se.jsx)(Qe,{onClick:l,emphasis:Be.eI.medium,size:Be.qE.medium,children:"Remove"})]})},At=function(){var e=(0,Se.Pc)((function(e){return e.sellAssets}));return(0,se.jsx)(Oe.sg,{children:e.length?e.map((function(e,t){return(0,se.jsx)(It,{asset:e},t)})):null})},Tt=320,Ct=360,Nt=s.default.div.withConfig({componentId:"sc-1cpp7nx-0"})(["position:fixed;display:flex;flex-direction:column;top:88px;right:20px;width:","px;height:calc(100vh - 108px);background:",";border:1px solid ",";border-radius:16px;box-shadow:",";z-index:",";@media only screen and (max-width:","){right:0px;top:0px;width:100%;height:100%;border-radius:0px;border:none;}@media only screen and (min-width:","){width:","px;}"],Tt,(function(e){return e.theme.backgroundSurface}),(function(e){return e.theme.backgroundOutline}),(function(e){return e.theme.shallowShadow}),(function(e){var t=e.raiseZIndex,n=e.isProfilePage;return t?n?Le.k.modalOverTooltip:Le.k.modalBackdrop-1:3}),(function(e){var t=e.theme;return"".concat(t.breakpoint.sm,"px")}),(function(e){var t=e.theme;return"".concat(t.breakpoint.xxxl,"px")}),Ct),Et=s.default.div.withConfig({componentId:"sc-1cpp7nx-1"})(["position:fixed;background:rgba(0,0,0,0.7);top:0px;width:100%;height:100%;"]),bt=s.default.div.withConfig({componentId:"sc-1cpp7nx-2"})(["background:",";color:",";margin:32px 28px 16px;padding:10px 0px;border-radius:12px;text-align:center;font-size:16px;font-weight:600;line-height:20px;cursor:pointer;transition:",";:hover{opacity:",";}"],(function(e){return e.theme.accentAction}),(function(e){return e.theme.accentTextLightPrimary}),(function(e){return e.theme.transition.duration.medium}),(function(e){return e.theme.opacity.hover})),wt=function(e){var t=e.top,n=e.show;return(0,se.jsx)(Pe.n,{marginX:"24",borderWidth:"1px",borderStyle:"solid",borderColor:"transparent",borderTopColor:t?"transparent":"backgroundOutline",borderBottomColor:t?"backgroundOutline":"transparent",opacity:n?"1":"0",transition:"250"})},_t=function(){var e=(0,Se.Pc)((function(e){return{resetSellAssets:e.reset,sellAssets:e.sellAssets}}),Y.X),t=e.resetSellAssets,n=e.sellAssets,r=(0,Se.aO)((function(e){return{setProfilePageState:e.setProfilePageState}})).setProfilePageState,s=(0,Se.cP)((function(e){return(0,o.Z)((0,o.Z)({},e),{},{bagIsLocked:e.isLocked,uncheckedItemsInBag:e.itemsInBag})}),Y.X),d=s.bagStatus,p=s.bagIsLocked,f=s.reset,g=s.bagExpanded,x=s.toggleBag,m=s.setBagExpanded,h=(0,Se.cP)((function(e){return{uncheckedItemsInBag:e.itemsInBag}})).uncheckedItemsInBag,v=(0,l.e5)(),I=(0,l._3)(),A=(0,l.GZ)(),T=(0,Se.dD)(),C=(0,z.useMemo)((function(){return(0,ee.G7)(h)}),[h]),N=(0,z.useState)(!1),E=(0,i.Z)(N,2),b=E[0],w=E[1],_=(0,Se.uh)(),j=_.userCanScroll,y=_.scrollRef,P=_.scrollProgress,k=_.scrollHandler,O=(0,z.useCallback)((function(){m({bagExpanded:!1,manualClose:!0})}),[m]);(0,z.useEffect)((function(){p&&!b&&w(!0)}),[p,b]);var R=C.length>0,S=C.length>0,L=n.length>0,Z=Boolean(!v&&!S&&d===$.s.ADDING_TO_BAG||v&&!L),B=(0,z.useMemo)((function(){return(0,o.Z)({},(0,ee.Hj)(C.map((function(e){return e.asset}))))}),[C]);return g&&A?(0,se.jsxs)(ke.h,{children:[(0,se.jsxs)(Nt,{"data-testid":"nft-bag",raiseZIndex:T||b,isProfilePage:v,children:[(0,se.jsx)(xt,{numberOfAssets:v?n.length:C.length,closeBag:O,resetFlow:v?t:f,isProfilePage:v}),Z&&(0,se.jsx)(vt,{}),(0,se.jsx)(wt,{top:!0,show:j&&P>0}),(0,se.jsx)(Oe.sg,{ref:y,className:"_1jcz50r1 rgw6ez2ej rgw6ez2k1 rgw6ez1yv rgw6ez7nf",onScroll:k,gap:"12",children:v?(0,se.jsx)(At,{}):(0,se.jsx)(ut,{})}),R&&!v&&(0,se.jsx)(ye,{setModalIsOpen:w,eventProperties:B}),L&&v&&(0,se.jsx)(bt,{onClick:function(){x(),r($.HA.LISTING),(0,c._P)(u.Yz.NFT_PROFILE_PAGE_START_SELL,{list_quantity:n.length,collection_addresses:n.map((function(e){return e.asset_contract.address})),token_ids:n.map((function(e){return e.tokenId}))})},children:(0,se.jsx)(a.cC,{id:"Continue"})})]}),I?(0,se.jsx)(Et,{onClick:x}):b&&(0,se.jsx)(Re.a,{onClick:function(){return p?void 0:w(!1)}})]}):null}},18402:function(e,t,n){n.d(t,{B:function(){return p},P:function(){return d}});var r=n(96812),i=n(83138),o=n(55011),s=n(96528),a=n(24177),c=n(72249),u=n(71233),l=n(56926);function d(){var e=(0,l.c)((function(e){return e.itemsInBag}));return(0,u.useMemo)((function(){return e.reduce((function(e,t){return t.status!==c.ZJ.UNAVAILABLE?e.add(r.O$.from(t.asset.updatedPriceInfo?t.asset.updatedPriceInfo.ETHPrice:t.asset.priceInfo.ETHPrice)):e}),r.O$.from(0))}),[e])}function p(){var e=d(),t=(0,o.U8)("ETH"),n=(0,u.useMemo)((function(){return(0,a.Z)((0,i.formatEther)(e.toString()),null!==t&&void 0!==t?t:void 0)}),[t,e]),r=(0,s.sq)(n);return(0,u.useMemo)((function(){return null===r||void 0===r?void 0:r.toExact()}),[r])}},2534:function(e,t,n){n.d(t,{d:function(){return b},$:function(){return E}});var r=n(74165),i=n(15861),o=n(29439),s=n(17248),a=n(13746),c=n(72249),u=n(92311),l=n(93433),d=n(40519),p=n(77949);function f(e){return e.filter((function(e){return e.status!==c.ZJ.UNAVAILABLE})).map((function(e){return e.asset}))}function g(e,t,n){var r=(0,d.$)(e,t),i=r.hasPriceAdjustment,o=r.updatedAssets,s=i&&n,a=(0,p.Kr)(o),u=a.unchanged,f=a.priceChanged,g=a.unavailable,x=o.length>0,m=f.length>0,h=g.length>0,v=m||h,I=function(e,t,n){return[].concat((0,l.Z)(e.map((function(e){return{asset:e,status:c.ZJ.UNAVAILABLE}}))),(0,l.Z)(t.map((function(e){return{asset:e,status:c.ZJ.REVIEWING_PRICE_CHANGE}}))),(0,l.Z)(n.map((function(e){return{asset:e,status:c.ZJ.REVIEWED}}))))}(g,f,u),A=function(e,t,n,r){return e?t?n?c.s.IN_REVIEW:c.s.CONFIRM_REVIEW:r?c.s.CONFIRM_QUOTE:c.s.CONFIRMING_IN_WALLET:c.s.ADDING_TO_BAG}(x,v,m,s);return{newBagItems:I,nextBagStatus:A}}function x(e){return{action:c.lQ.Buy,marketplace:e.marketplace.toLowerCase(),amountIn:e.price.value,assetIn:{ETHPrice:e.price.value,baseAsset:e.price.currency,basePrice:e.price.value,baseDecimals:"18"},amountOut:e.amount.toString(),assetOut:{id:e.id,decimals:18,address:e.contractAddress,priceInfo:{ETHPrice:e.price.value,baseAsset:e.price.currency,basePrice:e.price.value,baseDecimals:"18"},tokenType:e.tokenType,tokenId:e.tokenId,amount:e.amount.toString(),marketplace:e.marketplace.toLowerCase(),orderSource:"api"}}}function m(e,t){var n=e.route?e.route.map(x):[];return{route:n,routeResponse:{route:n,valueToSend:t?void 0:e.sendAmount.value,data:e.calldata,to:e.toAddress}}}var h=n(71233),v=n(81737),I=n(56926),A=n(68577),T=n(57811);function C(){var e=(0,s.useWeb3React)().provider,t=(0,A.p)((function(e){return e.sendTransaction})),n=(0,T.J)((function(e){return e.setTransactionResponse})),o=(0,I.c)((function(e){return{setLocked:e.setLocked,setBagExpanded:e.setBagExpanded,reset:e.reset}}),v.X),a=o.setLocked,c=o.setBagExpanded,u=o.reset;return(0,h.useCallback)(function(){var o=(0,i.Z)((0,r.Z)().mark((function i(o,s){var l,d,p=arguments;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(l=p.length>2&&void 0!==p[2]&&p[2],e){r.next=3;break}return r.abrupt("return");case 3:return r.next=5,t(e.getSigner(),s,o,l);case 5:(d=r.sent)&&(a(!1),n(d),c({bagExpanded:!1}),u());case 7:case"end":return r.stop()}}),i)})));return function(e,t){return o.apply(this,arguments)}}(),[e,u,t,c,a,n])}var N=n(4252);function E(){var e=(0,s.useWeb3React)().account,t=(0,I.c)((function(e){return{itemsInBag:e.itemsInBag,setBagStatus:e.setBagStatus,didOpenUnavailableAssets:e.didOpenUnavailableAssets,setDidOpenUnavailableAssets:e.setDidOpenUnavailableAssets,isLocked:e.isLocked,setLocked:e.setLocked,setItemsInBag:e.setItemsInBag}}),v.X),n=t.itemsInBag,l=t.setBagStatus,d=t.didOpenUnavailableAssets,p=t.setDidOpenUnavailableAssets,x=t.isLocked,A=t.setLocked,T=t.setItemsInBag,E=(0,N.i)((function(e){return e.tokenTradeInput})),b=(0,h.useMemo)((function(){return(0,u.G7)(n)}),[n]),w=(0,a.yo)(),_=(0,o.Z)(w,1)[0],j=C(),y=(0,h.useCallback)((function(){d&&p(!1),!x&&A(!0),l(c.s.FETCHING_ROUTE)}),[x,d,A,l,p]);return(0,h.useCallback)((0,i.Z)((0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:y(),_({variables:{senderAddress:e||"",nftTrades:(0,u.hI)(b),tokenTrades:E||void 0},onCompleted:function(e){if(!e.nftRoute||!e.nftRoute.route)return l(c.s.ADDING_TO_BAG),void A(!1);var t=f(b),n=!!E,r=m(e.nftRoute,n),i=r.route,o=r.routeResponse,s=g(t,i,n),a=s.newBagItems,u=s.nextBagStatus;if(T(a),l(u),u===c.s.CONFIRMING_IN_WALLET)return j(o,t,n),void A(!0);A(!1)}});case 2:case"end":return t.stop()}}),t)}))),[e,_,b,j,y,A,l,T,E])}var b=function(){var e=(0,s.useWeb3React)().account,t=(0,a.yo)(),n=(0,o.Z)(t,1)[0],c=C(),l=(0,h.useState)(!1),p=(0,o.Z)(l,2),f=p[0],g=p[1],x=(0,h.useCallback)(function(){var t=(0,i.Z)((0,r.Z)().mark((function t(i){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g(!0),n({variables:{senderAddress:e||"",nftTrades:(0,u.GW)([i]),tokenTrades:void 0},pollInterval:0,fetchPolicy:"no-cache",onCompleted:function(e){if(g(!1),e.nftRoute&&e.nftRoute.route){var t=m(e.nftRoute,!1),n=t.route,r=t.routeResponse,o=(0,d.$)([i],n).updatedAssets,s=(0,u.Kr)(o),a=s.priceChanged,l=s.unavailable;a.length>0||l.length>0||c(r,o,!1)}}});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e,n,c]);return(0,h.useMemo)((function(){return{fetchAndPurchaseSingleAsset:x,isLoading:f}}),[x,f])}},4252:function(e,t,n){n.d(t,{i:function(){return o}});var r=n(75078),i=n(18765),o=(0,r.Ue)()((0,i.mW)((function(e){return{inputCurrency:void 0,tokenTradeInput:void 0,setInputCurrency:function(t){return e((function(){return{inputCurrency:t}}))},clearInputCurrency:function(){return e((function(){return{inputCurrency:void 0}}))},setTokenTradeInput:function(t){return e((function(){return{tokenTradeInput:t}}))}}}),{name:"useTokenInput"}))}}]);
//# sourceMappingURL=5910.af612ad2.chunk.js.map